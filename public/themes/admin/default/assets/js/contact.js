var Contact=function(){var e={reponse:function(e){var t=$("#inputsujet").val(),a=$("#inputmessage").val().replace(/\r\n|\r|\n/g,"<br />"),n=$(e).data("contact");t&&a?$.ajax({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"admin/ajax/contact/rep",data:{id:n,sujet:t,message:a},dataType:"json",cache:!1,success:function(e){(e.code=1)?App.NotifToast("success",e.title,e.message):App.NotifToast("error","Erreur",e.message)},error:function(e){console.log(e.responseText)}}):App.NotifToast("error","Erreur","Merci de remplire tout les champs")},markedview:function(e){var t=e.parent("li"),a=t.data("contact");$.ajax({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"admin/ajax/contact/markedview",data:{id:a},dataType:"json",cache:!1,success:function(e){(e.code=1)?(App.NotifToast("success",e.title,e.message),t.hide("slow")):App.NotifToast("error","Erreur",e.message)},error:function(e){console.log(e.responseText)}})},delete:function(e){var t=e.parent("li"),a=t.data("contact");$.ajax({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"admin/ajax/contact/del",data:{id:a},dataType:"json",cache:!1,success:function(e){(e.code=1)?(App.NotifToast("success",e.title,e.message),t.hide("slow")):App.NotifToast("error","Erreur",e.message)},error:function(e){console.log(e.responseText)}})},init:function(){$(".repcontact").submit(function(t){return t.preventDefault(),e.reponse($(this)),!1}),$(".markedview-contact").click(function(){e.markedview($(this))}),$(".del-contact").click(function(){e.delete($(this))})}};return e}();$(document).ready(function(){Contact.init()});