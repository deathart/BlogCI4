var Cat=function(){var t={TitleToLink:function(){var t=$(".input_title_add"),e=$(".input_slug_add");t.bind("change paste keyup",function(){for(var a=[/[\300-\306]/g,/[\340-\346]/g,/[\310-\313]/g,/[\350-\353]/g,/[\314-\317]/g,/[\354-\357]/g,/[\322-\330]/g,/[\362-\370]/g,/[\331-\334]/g,/[\371-\374]/g,/[\321]/g,/[\361]/g,/[\307]/g,/[\347]/g],n=["A","a","E","e","I","i","O","o","U","u","N","n","C","c"],o=t.val(),c=0;c<a.length;c++)o=o.replace(a[c],n[c]);o=(o=(o=o.replace(/'/g,"")).replace(/"/g,"")).replace(/ /g,"-"),e.val(o)})},updatetitlecat:function(t){var e=t.data("catid"),a=t.val();$.ajax({beforeSend:function(t,e){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(e.type)||t.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"admin/ajax/cat/updatetitle",data:{id:e,title:a},dataType:"json",cache:!1,success:function(t){(t.code=1)?App.NotifToast("success",t.title,""):App.NotifToast("error","Erreur",t.message)},error:function(t){console.log(t.responseText)}})},updatecontentcat:function(t){var e=t.data("catid"),a=t.val();$.ajax({beforeSend:function(t,e){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(e.type)||t.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"admin/ajax/cat/updatecontent",data:{id:e,content:a},dataType:"json",cache:!1,success:function(t){(t.code=1)?App.NotifToast("success",t.title,""):App.NotifToast("error","Erreur",t.message)},error:function(t){console.log(t.responseText)}})},addcat:function(t){t.parents(".ac").before('<div class="col-md-3 casecat">\n                <div class="card border-secondary mb-3">\n<form class=\'add_cat_form\'>\n                    <div class="card-header">\n                        <input type="text" class="form-control input_title_add" placeholder=\'Titre\' />\n                        <input type="text" class="form-control input_slug_add" placeholder=\'Slug\' />\n                        <input type="text" class="form-control input_image_add" placeholder=\'Image\' />\n                    </div>\n                    <div class="card-body">\n                        <p class="card-text">\n                            <textarea style="height: 150px;" class="form-control textarea_content_add"></textarea>\n                        </p>\n                    </div>\n                    <div class="card-footer">\n                        <small class="text-muted">\n'+"<button type='submit' class='btn btn-success'>Ajouter une nouvel cat√©gorie</button>\n                        </small>\n                    </div>\n</form>\n                </div>\n            </div>")},addcatform:function(){var t=$(".input_title_add").val(),e=$(".input_slug_add").val(),a=$(".textarea_content_add").val(),n=$(".input_image_add").val();t&&a&&$.ajax({beforeSend:function(t,e){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(e.type)||t.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"admin/ajax/cat/add",data:{title:t,content:a,slug:e,icon:n},dataType:"json",cache:!1,success:function(t){(t.code=1)?(App.NotifToast("success",t.title,t.message),setTimeout(function(){location.reload()},3e3)):App.NotifToast("error","Erreur",t.message)},error:function(t){console.log(t.responseText)}})},init:function(){$(".input_title").bind("paste keyup",function(){t.updatetitlecat($(this))}),$(".textarea_content").bind("paste keyup",function(){t.updatecontentcat($(this))}),$(".add_cat").click(function(){t.addcat($(this)),t.TitleToLink(),$(".add_cat_form").submit(function(e){return e.preventDefault(),t.addcatform(),!1})})}};return t}();$(document).ready(function(){Cat.init()});