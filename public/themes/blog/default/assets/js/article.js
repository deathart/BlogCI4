var Article=function(){var e={init:function(){e.AddComments(),e.bloc_share()},AddComments:function(){$.ajaxSetup({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))}}),$(".add_com").submit(function(e){e.preventDefault();var t=$("#name"),a=$("#email"),o=$("#com"),s=$(this).data("post"),n=$("#captcha"),c=!1;return t.val()||(c=!0),a.val()||(c=!0),o.val()||(c=!0),n.val()||(c=!0),c?$(".message_add_coms").html("<span style='color: red'>Merci de remplire les champs</span>"):$.ajax({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"comments/checkcaptcha",data:{captcha:n.val()},dataType:"json",cache:!1,success:function(e){1==e.code?$.ajax({beforeSend:function(e,t){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))},method:"POST",url:App.GetBaseUrl()+"comments/add",data:{post_id:s,name:t.val(),email:a.val(),message:o.val()},dataType:"json",cache:!1,success:function(e){1==e.code?($(".message_add_coms").html("<span style='color: #1e7e34'>"+e.message+"</span>"),setTimeout(function(){location.reload()},3e3)):2==e.code&&$(".message_add_coms").html("<span style='color: red'>"+e.message+"</span>")},error:function(e){console.log(e.responseText)}}):2==e.code&&$(".message_add_coms").html("<span style='color: red'>"+e.message+"</span>")},error:function(e){console.log(e.responseText)}}),!1})},bloc_share:function(){var e=$("#share"),t=e.offset().top-parseFloat(e.css("margin-top").replace(/auto/,0));$(window).scroll(function(a){$(this).scrollTop()>=t?e.addClass("fixed"):e.removeClass("fixed")})}};return e}();$(document).ready(function(){Article.init()});